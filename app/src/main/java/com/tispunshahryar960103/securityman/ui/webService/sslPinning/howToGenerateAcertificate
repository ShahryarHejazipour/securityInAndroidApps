

در سایت https://developer.android.com یک نمونه کد توصیه شده برای اینکار وجود دارد.
با استفاده از کلاس CertificateFactory اقدام به ساختن Certificate های
 مورد نیاز می کند. نمونه ی این کد در عکس sampleCodeForGenerateCertificate  در همین پکیج قرار دارد .

 نکته : CA یا Certificate Authority به معنی یک شخص حقیقی یا حقوقی است که گواهی‌های دیجیتال (گواهی‌های کلید عمومی)
 را صادر می‌کند. گواهی دیجیتال تضمین می‌کند که موضوع گواهی مورد نظر ما به اسم همان صاحبی است که در آن گفته شده‌است.
  این گواهی به دیگران (کسانی که بر اساس این گواهی کار خود را انجام می‌دهند) اجازه می‌دهد که
   به امضاءها و بیانیه‌هایی که بر اساس کلید خصوصی گواهی یاد شده تولید شده‌اند اطمینان کنند.
   در این مدلِ ارتباط با اعتماد، یک مرجع صدور گواهی دیجیتال (CA) شخص ثالث مورد اطمینانی است که
    از سوی هر دو سمت گواهی (موضوع یا همان صاحب گواهی و شخص اعتمادکننده به گواهی) معتمد به حساب می‌آید.
     گواهی‌ها مشخصه‌هایی از طرح‌های گواهی دیجیتال (PKI) هستند.
        مراجع صدور گواهی دیجیتال تجاری به منظور حمایت بیشتر مرورگرهای تارنما (Web) از آن‌ها و بکارگیری اعتماد خودکار
                                                 در مروزگرها (Mozilla از فهرستی شامل حداقل ۳۶ صادرکننده گواهی دیجیتال پشتیبانی می‌کند).
                                                  به تعداد مروزگرهای تارنما و ادوات دیگری که به یک صادرکننده گواهی دیجیتال اعتماد دارند همه‌گیری (ubiquity) می‌گویند.

-----------------------------------------------------------------

کلیت این کد با صورت زیر کار می کند :

1- یک CA از طریق یک InputStream لود می شود. پسوند فایل لود شده  .crt است.
2- یک KeyStore با استفاده از فایل لود شده ساخته می شود.
3- از KeyStore ساخته شده برای ساختن یک TrustManager استفاده می شود.
TrustManager چیزی است که برای Certificate Validation یا اعتبارسنجی گواهی نامه دریافت شده از سرور استفاده می شود.
4- با استافاده از TrustManager یک SSL Context ساخته می شود.
5- از SSL Context ساخته شده یک  SSLSocketFactory گرفته می شود.
6- SSLSocketFactory گرفته شده برای Override کردن این SSLSocketFactory از آبجکت HttpsURLConnection استفاده می شود.

----------------------------------------------------------

برای استفاده از SSL Pinning در Retrofit به عکس sslPinningInRetrofitAndInApache.jpeg واقع در همین پکیج مراجعه شود.

-------------------------------------------------------------------





